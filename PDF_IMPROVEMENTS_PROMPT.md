# PDF Report Generation - Comprehensive Improvement Prompt

## Context
We're building a white-label SEO reporting SaaS tool. The PDF reports are generated using jsPDF and need several design improvements to match our brand guidelines and improve readability.

## Current File Location
`/src/lib/pdf/jspdf-generator-v3.ts`

## Issues to Fix & Design Changes Required

### 1. Cover Page Redesign (HIGH PRIORITY)
**Current State:** Purple background with white card
**Desired State:** White background with purple card (like screenshot 1)

**Specifications:**
- Background: White (#FFFFFF)
- Card: Purple (#9233ea) with rounded corners
- Card should contain:
  - "Digital Frog Agency" text in white
  - "Executive Summary Report" in white (large, bold)
  - Client name in white
  - Date range in white
  - Teal separator line
  - Generation date in white/light gray

**Design Goal:** Make it look like the reference screenshot with the purple card prominently displayed on white background, creating strong visual contrast.

---

### 2. Key Insights Section - Move to Separate Page (HIGH PRIORITY)
**Current State:** Key Insights is on page 2 after metric cards, but layout is broken
**Desired State:** Move entire Key Insights section to its own dedicated page (new page 3)

**Specifications:**
- Create new page after Executive Summary (metric cards)
- Page structure:
  - Header with agency branding (same as other pages)
  - Page title: "Key Insights"
  - Teal underline
  - All 3 insight boxes with proper spacing
  - Each box should have:
    - Title in purple
    - Description text
    - Colored background (purple/teal alternating)
    - Rounded corners with border
  - Footer with page number
- **Ensure no content overflow or text cutoff**

**New Page Structure:**
- Page 1: Cover (purple card on white)
- Page 2: Executive Summary (4 metric cards only)
- Page 3: Key Insights (3 insight boxes) - NEW
- Page 4: Performance Analytics (charts)
- Page 5: Strategic Recommendations

**Update page numbers to "Page X of 5"**

---

### 3. Top Performing Keywords Chart - Alignment Fix (MEDIUM PRIORITY)
**Current State:** Keywords bar chart is misaligned, bars don't line up properly
**Desired State:** Clean, properly aligned horizontal bar chart

**Specifications:**
- Fix label alignment (left-aligned, truncate at 25 chars)
- Fix bar starting position (consistent left margin)
- Fix value display (right of bar, not overlapping)
- Ensure all 5 bars are same width container
- Purple bars with light purple background
- Proper spacing between bars (6-8px)

**Example Layout:**
```
the digital frog      [████████████████████] 1
digital frog          [████] 0
frog agency           [████] 0
```

---

### 4. Footer Text Overlap Fix (HIGH PRIORITY)
**Current State:** Footer has overlapping text (agency info, generation date, page numbers)
**Desired State:** Clean, properly spaced footer with no overlaps

**Specifications:**
- Left side: "Digital Frog Agency" (purple, bold)
- Left side (below): "jump@digitalfrog.co • +56 9 9073 0352 • https://digitalfrog.co" (gray)
- Center: "Generated by Reportr • MM/DD/YYYY" (gray)
- Right side: "Page X of 5" (gray)
- Add proper spacing/padding to prevent overlaps
- Use smaller font sizes if necessary (8-9pt)
- Ensure separator line is above all text

---

### 5. Graph Lines - Make Thinner & More Elegant (MEDIUM PRIORITY)
**Current State:** Line charts have thick lines (2px)
**Desired State:** Thinner, more elegant lines (1px or 1.5px)

**Specifications:**
- Change line width from 2px to 1.5px for chart lines
- Keep data point circles at 1.5px radius (or slightly smaller at 1.2px)
- Maintain colors: purple for clicks, teal for impressions
- Keep grid lines thin (0.3px) - these are good

---

### 6. Add Axis Labels to Charts (HIGH PRIORITY)
**Current State:** Charts have min/max values but no axis labels
**Desired State:** Clear X and Y axis labels

**Specifications for Line Charts (Clicks & Impressions):**
- Y-axis label: "Count" (vertical text on left, or just label at top)
- X-axis label: "Time Period" or "Days" (bottom center)
- Keep existing min/max value labels
- Font size: 8pt, gray color

**Specifications for Bar Chart (Keywords):**
- X-axis label: "Clicks" (bottom right)
- Y-axis label: "Keywords" (optional, or implicit from chart title)
- Font size: 8pt, gray color

---

## Color Palette Reference
```typescript
// Digital Frog Brand Colors
primaryPurple: [146, 51, 234]   // #9233ea - Main brand color
lightPurple: [233, 213, 255]    // #e9d5ff - Light backgrounds
veryLightPurple: [250, 245, 255] // #faf5ff - Very light backgrounds
teal: [34, 211, 238]            // #22d3ee - Accent color
lightTeal: [165, 243, 252]      // #a5f3fc - Light teal
darkGray: [30, 41, 59]          // #1e293b - Main text
mediumGray: [100, 116, 139]     // #64748b - Secondary text
lightGray: [241, 245, 249]      // #f1f5f9 - Subtle elements
white: [255, 255, 255]          // #FFFFFF - White backgrounds
```

---

## Technical Requirements

### TypeScript Safety
- All arrays must be properly typed as tuples: `[number, number, number]`
- Check for undefined before array access
- Handle empty data gracefully

### Code Quality
- Use existing helper functions: `addFooter()`, `addPageHeader()`, `drawLineChart()`, `drawBarChart()`
- Maintain consistent spacing variables
- Comment complex calculations
- Follow existing code structure

### Testing Considerations
- Must work with varying data volumes (0 clicks to millions)
- Must handle missing topQueries data
- Must work for custom date ranges
- Charts should show "No data available" when appropriate

---

## Success Criteria
✅ Cover page has purple card on white background (high contrast, professional)
✅ Key Insights has its own dedicated page with all 3 boxes visible
✅ Keywords bar chart is properly aligned with no overlap
✅ Footer text is clean with no overlapping elements
✅ Chart lines are thin and elegant (1.5px)
✅ All charts have clear axis labels
✅ Page numbers updated to "Page X of 5"
✅ All content fits within page boundaries (no cutoff)
✅ TypeScript builds without errors
✅ Overall aesthetic is professional and matches Digital Frog branding

---

## Deliverables
1. Updated `/src/lib/pdf/jspdf-generator-v3.ts` file
2. All changes implemented and tested
3. Build passes with no TypeScript errors
4. Commit message describing changes

---

## Additional Notes
- The user likes the overall look, so maintain the current design system
- Focus on fixing alignment/spacing issues
- Keep the modern, clean aesthetic with purple and teal accents
- Ensure all text is readable (proper contrast, font sizes)
- Make sure charts are professional and publication-ready

---

## Reference
Current working file: `/src/lib/pdf/jspdf-generator-v3.ts`
API route using it: `/src/app/api/generate-pdf/route.ts`
Brand guidelines: See `/digital_frog_brand_guide.html` document

---

**Priority Order:**
1. Cover page redesign (purple card on white)
2. Move Key Insights to separate page
3. Fix footer text overlap
4. Add axis labels to charts
5. Fix keywords chart alignment
6. Make graph lines thinner

**Estimated Changes:** ~200-300 lines of code modifications
**Build Requirement:** Must pass `npm run build` with no errors
